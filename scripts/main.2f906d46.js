var FastClick;FastClick.attach(document.body),$(function(){"use strict";function a(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b;return a}function b(a){"show"===a?($("#card-container").removeClass().one(d,function(){$("#card-container").empty()}),$(".start-screen").hasClass("exit-left")&&$(".start-screen").removeClass("exit-left")):"hide"===a&&$(".start-screen").addClass("exit-left")}function c(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(void 0!==b.style[a])return c[a]}b("show"),$(".btn-play").on("click",function(){var c="",d=$(this).attr("data-level"),e=parseInt(d);8===e?c="easy":18===e?c="medium":32===e&&(c="hard"),b("hide"),$("#card-container").addClass("on-screen "+c);var f,g=[];for(f=0;d>f;f++)g.push(f);var h=a($.merge(g,g)),i=100/Math.sqrt(h.length);for(f=0;f<h.length;f++){var j=h[f];10>j&&(j="0"+j),$('<div class="card" style="width:'+i+"%; height:"+i+'%;"><div class="flipper"><div class="front"></div><div class="back"><i class="icon icon-'+j+'" data-icon="'+j+'"></i></div></div></div>').appendTo("#card-container")}var k="flipped",l=$("#card-container"),m=$(".card"),n=2*e,o=!1;m.on("click",function(a){if(a.preventDefault(),o)return!1;$(this).addClass(k);var c=$(this).find(".icon").attr("data-icon");l.find(".card.flipped").length>1&&(o=!0,setTimeout(function(){var a=$(".card.flipped .icon[data-icon="+c+"]");a.length>1?(a.parents(".card").toggleClass("found flipped"),o=!1,$(".card.found").length===n&&b("show")):(o=!1,m.removeClass("flipped"))},400))})});var d=c();$(document).keyup(function(a){27===a.keyCode&&b("show")})});